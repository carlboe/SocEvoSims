{
    "collab_server" : "",
    "contents" : "\n\n## investigation of the 1st 1000 cycles of sim168\nload(\".CheckPoint\");\n\npdf(file=\"history.pdf\",paper=\"letter\",height=7.5,width=10);\n\n# total population and proportion population by subpopulation\nt.pop.series <- apply(pop.series,c(1,3),sum);\n# proportion in age, by subpopulation\nt.pop.prop.series <- sweep(pop.series,c(1,3),t.pop.series,\"/\");\n\nfyr=1; lyr=600;\n\npar(mfrow=c(1,1));\n# TOTPOP.bysub\nmatplot(fyr:lyr,t.pop.series[fyr:lyr,],type=\"l\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes )\ntitle(paste(sim.num,\"Total population size, by subpopulation\\n TOTPOP.bysub  \"))\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n\nmatplot(fyr:lyr,log(t.pop.series[fyr:lyr,]),type=\"l\",xlab=\"Cycle\",ylab=\"log(Pop)\",col=subPopTypes );\ntitle(paste(sim.num,\"log Total population size, by subpopulation\\n  TOTLPOP.bysub \"))\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n\n# population in age 0 (proxy for births)\ni.ageclass=1;                           # age 0-5\n\nlyr=400;\nmatplot(fyr:lyr,pop.series[fyr:lyr,i.ageclass,],type=\"l\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes )\ntitle(paste(sim.num,\"Total population, ages 0-4, by subpopulation\\n TOTPOP.X.bysub\"))\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n\n\nmatplot(fyr:lyr,t.pop.prop.series[fyr:lyr,i.ageclass,],type=\"l\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes )\ntitle(\" Proportion ages 0-4, by subpopulation\\n  PPOP.X.bysub\")\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n\n# Age Structure\nf.plot<-function(tt){\nmatplot(1:16,(t.pop.prop.series[tt+1,,]),type=\"l\",col=subPopTypes,xlab=\"Age Class\",ylab=\"\")\ntitle(paste(sim.num,\"Age Structure,t=\",tt,\"\\n ASPOP.t.bysub \"));\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n\n};\n\npar(mfrow=c(2,2))\nf.plot(0); f.plot(50); f.plot(100); f.plot(500)\n\n# Sharing gamma profiles\nf.plot<-function(tt){\nmatplot(1:16,(gamma.series[tt+1,,]),type=\"l\",col=subPopTypes,xlab=\"Age Class\",ylab=\"\")\ntitle(paste(sim.num,\"Gamma Profile,t=\",tt,\" \\n GAMMA.t.bysub\"))\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n};\npar(mfrow=c(2,2))\nf.plot(0);abline(h=1.2); f.plot(5);abline(h=1.2);\nf.plot(50);abline(h=1.2); f.plot(100);abline(h=1.2)\n\n#t.t <- t.pop0.series[fyr:lyr,]/t.pop.series[fyr:lyr,];\n\n# production is captured in yz series\nf.plot<-function(tt){\nmatplot(1:16,(yx.series[tt+1,,]),type=\"l\",col=subPopTypes,xlab=\"Age Class\",ylab=\"\")\ntitle(paste(sim.num,\"Production Profile,t=\",tt,\"\\n YX.t.bysub \"));\nlegend(x=\"bottomright\",fill=subPopTypes,legend=subPopLabels)\n};\npar(mfrow=c(2,2))\nf.plot(0); f.plot(5); f.plot(20); f.plot(100)\n\n\npar(mfrow=c(1,1))\n\nlyr=5000\nmatplot(fyr:lyr,density.series[fyr:lyr,],type=\"l\",xlab=\"Cycle\",col=subPopTypes)\ntitle(\"Subpopulation Density measure \\n(proportional to  total consumption of subpopulation) \")\n\nlyr=5000;\npar(mfrow=c(2,1))\nmatplot(fyr:lyr,kinship5.series[fyr:lyr,],type=\"l\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes)\ntitle(\"Mean kin group (kin5) size within subpopulation \")\n\nmatplot(fyr:lyr,sg.series[fyr:lyr,],type=\"l\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes)\ntitle(\"Mean social group  size within subpopulation \")\n\n\npar(mfrow=c(1,1));\nSkipSmooth<- FALSE;\nif(! SkipSmooth){\n\nlyr=11000;  \nt.t <- kinship5.series[fyr:lyr,]\n\nc.list<- as.list(NA+subPopTypes);\nt.ra <- 999; t.rb <- 0;\n#c.range <- NA+subPopTypes;\nfor(i in seq(subPopTypes)){\n  t.i <-  supsmu(fyr:lyr,t.t[,i]);\n  c.list[[i]] <- t.i\n  #lines(c.list[[i]], col=subPopTypes[i])\n  t.ra <- min(t.ra, min(t.i$y));\n  t.rb <- max(t.rb, max(t.i$y));\n  \n}\n\nmatplot(fyr:lyr,t.t ,type=\"n\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes,ylim=c(t.ra,t.rb) )\ntitle(\"Mean kin5 group size, by subpopulation\\n bl=M, red=k5,gr=5050\");\nfor(i in seq(subPopTypes)){\n  lines(c.list[[i]], col=subPopTypes[i]);\n}\n\n\n## social group sizes\nt.t <- sg.series[fyr:lyr,]\n\nc.list<- as.list(NA+subPopTypes);\nt.ra <- 999; t.rb <- 0;\n#c.range <- NA+subPopTypes;\nfor(i in seq(subPopTypes)){\n  t.i <-  supsmu(fyr:lyr,t.t[,i]);\n  c.list[[i]] <- t.i\n  #lines(c.list[[i]], col=subPopTypes[i])\n  t.ra <- min(t.ra, min(t.i$y));\n  t.rb <- max(t.rb, max(t.i$y));\n  \n}\n\nmatplot(fyr:lyr,t.t ,type=\"n\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes,ylim=c(t.ra,t.rb) )\ntitle(\"Mean social group size, by subpopulation\\n bl=M, red=k5,gr=5050\");\nfor(i in seq(subPopTypes)){\n  lines(c.list[[i]], col=subPopTypes[i]);\n}\n\n}\n\n\n\npar(mfrow=c(2,2))\nfor(i in c(0,2,4,6,8,10,12,14)){\n  matplot(fyr:lyr,gamma.series[fyr:lyr,i+1,],type=\"l\",col=subPopTypes,xlab=\"Cycle\")\n  title(paste(\"Age\",5*i,\" Gamma (50% kin5, 50% sg)\\n  within subpopulation \"))\n\n}\n\nlyr=15000\nfor(i in c(0,2,4,6,8,10,12,14)){\n  matplot(((lyr-100):lyr),gamma.series[((lyr-100):lyr),i+1,],type=\"l\",col=subPopTypes,xlab=\"Cycle\")\n  title(paste(\"Age\",5*i,\" Gamma (50% kin5, 50% sg)\\n  within subpopulation \"))\n\n}\n\n\n\nfor(i in c(0,2,4,6,8,10,12,14)){\n  t.t <- qx.series[fyr:lyr, i+1,]\n  c.list<- as.list(NA+subPopTypes);\n  t.ra <- 1; t.rb <- 0;\n  \n  for(j in seq(c.list)){\n    ci <- supsmu(fyr:lyr,qx.series[fyr:lyr,i+1,j])\n    t.ra <- min(t.ra, min(ci$y));\n    t.rb <- max(t.rb, max(ci$y));\n    c.list[[j]] <- ci\n  }\n\n  matplot(fyr:lyr,t.t ,type=\"n\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes,ylim=c(t.ra,t.rb) )\n  title(paste(\"qx age class\",i,\"by subpopulation\\n bl=M, red=k5,gr=5050\"));\n  for(k in seq(subPopTypes)){\n    lines(c.list[[k]], col=subPopTypes[k]);\n  }\n  \n}\n      \n\n\n\npar(mfrow=c(1,1))\n\nlyr=9000;\nt.t <- fission.series[fyr:lyr,];\n\nc.list<- as.list(NA+subPopTypes);\nt.ra <- 1; t.rb <- 0;\n#c.range <- NA+subPopTypes;\nfor(i in seq(subPopTypes)){\n  t.i <-  supsmu(fyr:lyr,t.t[,i]);\n  c.list[[i]] <- t.i\n  #lines(c.list[[i]], col=subPopTypes[i])\n  t.ra <- min(t.ra, min(t.i$y));\n  t.rb <- max(t.rb, max(t.i$y));\n  \n}\nmatplot(fyr:lyr,t.t ,type=\"n\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes,ylim=c(t.ra,t.rb) )\ntitle(\"Proportion Fissioning, by subpopulation\\n bl=M, red=k5,gr=5050\");\nfor(i in seq(subPopTypes)){\n  lines(c.list[[i]], col=subPopTypes[i]);\n}\n\n\n\nlyr=9000;\nt.t <- fusion.series[fyr:lyr,];\n\nc.list<- as.list(NA+subPopTypes);\nt.ra <- 1; t.rb <- 0;\n#c.range <- NA+subPopTypes;\nfor(i in seq(subPopTypes)){\n  t.i <-  supsmu(fyr:lyr,t.t[,i]);\n  c.list[[i]] <- t.i\n  #lines(c.list[[i]], col=subPopTypes[i])\n  t.ra <- min(t.ra, min(t.i$y));\n  t.rb <- max(t.rb, max(t.i$y));\n  \n}\nmatplot(fyr:lyr,t.t ,type=\"n\",xlab=\"Cycle\",ylab=\"\",col=subPopTypes,ylim=c(t.ra,.04) )\ntitle(\"Proportion Fusioning, by subpopulation\\n bl=M, red=k5,gr=5050\");\nfor(i in seq(subPopTypes)){\n  lines(c.list[[i]], col=subPopTypes[i]);\n}\n",
    "created" : 1547657316799.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2394068478",
    "id" : "7AB4BD4E",
    "lastKnownWriteTime" : 1181360935,
    "last_content_update" : 1181360935,
    "path" : "/data/nta0/boe/EvoSims/sim168D_2019/history.plots.r",
    "project_path" : "history.plots.r",
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}